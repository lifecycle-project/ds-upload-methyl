<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>dsUploadMethyl • dsUploadMethyl</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="dsUploadMethyl">
<meta property="og:description" content="dsUploadMethyl">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dsUploadMethyl</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dsUploadMethyl.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dataVersioning.html">Data versioning</a>
    </li>
    <li>
      <a href="../articles/dictionaryVersioning.html">Dictionairy versioning</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lifecycle-project/ds-upload-methyl/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="dsUploadMethyl_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>dsUploadMethyl</h1>
                        <h4 class="author">Sido Haakma</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lifecycle-project/ds-upload-methyl/blob/master/vignettes/dsUploadMethyl.Rmd"><code>vignettes/dsUploadMethyl.Rmd</code></a></small>
      <div class="hidden name"><code>dsUploadMethyl.Rmd</code></div>

    </div>

    
    
<p>We have now dedicated processes to handle non-tabular data. We now support the following data.</p>
<div id="methylation-data" class="section level2">
<h2 class="hasAnchor">
<a href="#methylation-data" class="anchor"></a>Methylation data</h2>
<p>We use the <a href="https://github.com/isglobal-brge/methylclock">methylclock</a> package to generate the tabular methylation clocks. Which allows us to upload it to the DataSHIELD backends.</p>
<p>You can start with uploading the data. The raw data is processed by the <code>ds-upload</code> package and the autmatically uploaded to the DataSHIELD backend.</p>
<p>Preparation steps:</p>
<ul>
<li>Reformat <strong>id</strong> to <strong>child_id-value</strong>: When you prepared the raw data make sure the ID column in the raw data corresponds with the right child_id in you other data. For instance in the <em>core</em> of <em>outcome</em> variables.</li>
<li>Add <em>age</em> information to the methylation data When you generate the methylation data you need to add the covariates data as well. You can do this by filling in the input path for the covariate data in the <code>du.upload.methyl.clock(covariate_data_input_path = "C:\tmp\covariate_data.csv")</code> Make sure you have and “Age” column in the data to use in the clock generation process.</li>
</ul>
<p>You can generate the clocks and upload to the Armadillo using these commands</p>
<div id="upload-to-armadillo" class="section level3">
<h3 class="hasAnchor">
<a href="#upload-to-armadillo" class="anchor"></a>Upload to Armadillo</h3>
<p>Install the packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dsUploadMethyl"</span>, repos <span class="op">=</span> <span class="st">"https://registry.molgenis.org/repository/R"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"methylclock"</span>, repos <span class="op">=</span> <span class="st">"https://registry.molgenis.org/repository/R"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Login to the Armadillo</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">login_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  server <span class="op">=</span> <span class="st">"https://armadillo.test.molgenis.org"</span>, 
  storage <span class="op">=</span> <span class="st">"https://armadillo-minio.test.molgenis.org"</span>, 
  driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>
<span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">methylclock</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifecycle-project/ds-upload-methyl">dsUploadMethyl</a></span><span class="op">)</span>

<span class="fu"><a href="../reference/du.login.html">du.login</a></span><span class="op">(</span><span class="va">login_data</span><span class="op">)</span></code></pre></div>
<p>Upload the data to Armadillo</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/du.upload.methyl.clocks.html">du.upload.methyl.clocks</a></span><span class="op">(</span>
  dict_name <span class="op">=</span> <span class="st">"methylclocks"</span>, 
  methyl_data_input_path <span class="op">=</span> <span class="st">"https://github.com/isglobal-brge/methylclock/raw/v0.7.3/inst/extdata/MethylationDataExample55.csv?raw=true"</span>,
  covariate_data_input_path <span class="op">=</span> <span class="st">"https://github.com/isglobal-brge/methylclock/raw/v0.7.3/inst/extdata/SampleAnnotationExample55.csv?raw=true"</span>,
  dict_version <span class="op">=</span> <span class="st">"1_0"</span>,
  data_version <span class="op">=</span> <span class="st">"1_0"</span><span class="op">)</span></code></pre></div>
</div>
<div id="upload-to-opal" class="section level3">
<h3 class="hasAnchor">
<a href="#upload-to-opal" class="anchor"></a>Upload to Opal</h3>
<p>You can generate the clocks and upload to the Opal using these commands:</p>
<p>Install the packages</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dsUploadMethyl"</span>,<span class="st">"methylclock"</span><span class="op">)</span>, repos <span class="op">=</span> <span class="st">"https://registry.molgenis.org/repository/R"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Login to the Opal server</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">login_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  server <span class="op">=</span> <span class="st">"https://opal.edge.molgenis.org"</span>, 
  username <span class="op">=</span> <span class="st">"administrator"</span>, 
  password <span class="op">=</span> <span class="st">"ouf0uPh6"</span>, 
  driver <span class="op">=</span> <span class="st">"OpalDriver"</span>
<span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifecycle-project/ds-upload-methyl">dsUploadMethyl</a></span><span class="op">)</span>

<span class="fu"><a href="../reference/du.login.html">du.login</a></span><span class="op">(</span><span class="va">login_data</span><span class="op">)</span></code></pre></div>
<p>Upload the data</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">du.upload.methyl.clocks</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dict_name =</span> <span class="st">"methylclocks"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">methyl_data_input_path =</span> <span class="st">"https://github.com/isglobal-brge/methylclock/raw/master/inst/extdata/MethylationDataExample55.csv?raw=true"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">covariate_data_input_path =</span> <span class="st">"https://github.com/isglobal-brge/methylclock/raw/master/inst/extdata/SampleAnnotationExample55.csv?raw=true"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dict_version =</span> <span class="st">"1_0"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_version =</span> <span class="st">"1_0"</span>)</span></code></pre></div>
</div>
</div>
<div id="troubleshooting" class="section level2">
<h2 class="hasAnchor">
<a href="#troubleshooting" class="anchor"></a>Troubleshooting</h2>
<p>You can run into trouble running the methylation upload into Opal. Here are some answers to questions you can encouter.</p>
<div id="files-are-not-loaded" class="section level3">
<h3 class="hasAnchor">
<a href="#files-are-not-loaded" class="anchor"></a>Files are not loaded</h3>
<p>If the input files are not picked up directly please make sure the whole input path is specified:</p>
<p>Example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">du.upload.methyl.clocks</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dict_name =</span> <span class="st">"methylation_clocks"</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">methyl_data_input_path =</span> <span class="st">"C:\Users\yourself</span><span class="sc">\r</span><span class="st">aw_clock_data.csv"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">covariate_data_input_path =</span> <span class="st">"C:\Users\yourself</span><span class="sc">\r</span><span class="st">aw_covariate_data.csv"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_version =</span> <span class="st">"1_0"</span>)</span></code></pre></div>
</div>
<div id="cannot-allocate-vector-of-size-n-mb" class="section level3">
<h3 class="hasAnchor">
<a href="#cannot-allocate-vector-of-size-n-mb" class="anchor"></a>Cannot allocate vector of size n Mb …</h3>
<p>Running the methylation data generation can be memory consuming. You need to allocate enough memory to perform the action. You can exceute</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/memory.size.html">memory.limit</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">2500</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sido Haakma.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
